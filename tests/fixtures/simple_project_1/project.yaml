# This project should parse correctly and can be used to test
# dependencies and docker_invocation generation
version: '1.0'

actions:

  generate_cohorts:
    run: cohortextractor:0.5.2 generate_cohort --output-dir=/workspace --database-url={database_url}
    outputs:
      highly_sensitive:
        cohort: input.csv

  run_model:
    run: stata-mp:1.0 analysis/model.do ${{ needs.generate_cohorts.outputs.highly_sensitive.cohort }}
    needs: [generate_cohorts]
    outputs:
      moderately_sensitive:
        log: model.log
